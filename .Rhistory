kable()
d %>%
select(subid, condition) %>%
unique() %>%
group_by(condition) %>%
summarise(n()) %>%
kable()
d %>%
group_by(subid) %>%
select(subid, shortname, trial.type) %>%
unique() %>%
group_by(subid, trial.type) %>%
summarise(n()) %>%
kable()
d_descrip <- d %>%
group_by(subid) %>%
select(subid, shortname, trial.type) %>%
unique() %>%
group_by(subid, trial.type) %>%
summarise(n()) %>%
kable()
d_descrip <- d %>%
group_by(subid) %>%
select(subid, shortname, trial.type) %>%
unique() %>%
group_by(subid, trial.type) %>%
summarise(count = n()) %>%
kable()
sum(d_descrip$count)
d_descrip <- d %>%
group_by(subid) %>%
select(subid, shortname, trial.type) %>%
unique() %>%
group_by(subid, trial.type) %>%
summarise(count = n()) %>%
kable()
d_descrip
d_descrip <- d %>%
group_by(subid) %>%
select(subid, shortname, trial.type) %>%
unique() %>%
group_by(subid, trial.type) %>%
summarise(count = n())
sum(d_descrip$count)
d_descrip %>% kable()
## output: all.exp (spreadsheet of exposure trial data)
# label AOIs
d %<>% mutate(aoi = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x < 1230 & x > 690 & y > 540, "face", NA)))))
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~aoi + shortname + subid + target_object, data = .) %>%
as.data.frame() %>%
filter(aoi != "face")
View(all.exp)
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~aoi + shortname + subid + target_object, data = .) %>%
as.data.frame() %>%
filter(aoi != "face")
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~aoi + shortname + subid + target_object + condition, data = .) %>%
as.data.frame() %>%
filter(aoi != "face")
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~aoi + shortname + subid + target_object, data = .) %>%
as.data.frame() %>%
filter(aoi != "face")
unique(d$aoi)
as.character(d$aoi)
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
mutate(participant_looking = as.character(aoi))
?cound
?count
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
mutate(participant_looking = as.character(aoi)) %>%
group_by(subid, shortname) %>%
count(participant_looking)
View(all.exp)
View(all.exp)
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
mutate(participant_looking = as.character(aoi))
View(all.exp)
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
mutate(participant_looking = as.character(aoi)) %>%
group_by(subid, shortname) %>%
summarise(count = n())
View(all.exp)
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
mutate(participant_looking = as.character(aoi)) %>%
group_by(subid, shortname, participant_looking) %>%
summarise(count = n())
View(all.exp)
?n()
?complete
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
mutate(participant_looking = as.character(aoi)) %>%
group_by(subid, shortname, participant_looking) %>%
summarise(count = n()) %>%
complete(subid, fill = list(count = 0))
View(all.exp)
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
mutate(participant_looking = as.character(aoi)) %>%
group_by(subid, shortname, participant_looking) %>%
summarise(count = n()) %>%
complete(subid)
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
mutate(participant_looking = as.character(aoi)) %>%
group_by(subid, shortname, participant_looking) %>%
summarise(count = n())
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
mutate(participant_looking = as.character(aoi)) %>%
group_by(subid, shortname, participant_looking) %>%
summarise(count = n()) %>%
complete(subid, nesting(shortname, participant_looking))
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
mutate(participant_looking = as.character(aoi)) %>%
group_by(subid, shortname, participant_looking) %>%
summarise(count = n()) %>%
complete(subid, shortname, participant_looking)
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
mutate(participant_looking = as.character(aoi)) %>%
xtabs(~aoi + shortname + subid + target_object, data = .) %>%
as.data.frame() %>%
filter(aoi != "face")
View(all.exp)
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
select(subid, condition) %>%
unique() %>%
left_join(all.exp, by = "subid")
?read.csv
d <- read_csv("processed_data_adult/processed_adult.csv", stringsAsFactors = F)
exp.looks.to.target <- all.exp%>%
select(shortname, condition) %>%
unique()
View(exp.looks.to.target)
# create all.exp,
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
mutate(participant_looking = as.character(aoi)) %>%
xtabs(~participant_looking + shortname + subid + target_object, data = .) %>%
as.data.frame() %>%
filter(participant_looking != "face")
# add condition column
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking != "face") %>%
select(subid, condition) %>%
unique() %>%
left_join(all.exp, by = "subid")
d %<>% mutate(participant_looking_factor = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x < 1230 & x > 690 & y > 540, "face", NA)))),
participant_looking_chart = as.character(participant_looking_factor))
# create all.exp,
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~participant_looking + shortname + subid + target_object, data = .) %>%
as.data.frame() %>%
filter(participant_looking != "face")
# add condition column
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking != "face") %>%
select(subid, condition) %>%
unique() %>%
left_join(all.exp, by = "subid")
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~participant_looking + shortname + subid + target_object, data = .) %>%
as.data.frame() %>%
filter(participant_looking != "face")
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~participant_looking_character + shortname + subid + target_object, data = .) %>%
as.data.frame() %>%
filter(participant_looking != "face")
d %<>% mutate(participant_looking_factor = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x < 1230 & x > 690 & y > 540, "face", NA)))),
participant_looking_char = as.character(participant_looking_factor))
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~participant_looking_char + shortname + subid + target_object, data = .) %>%
as.data.frame() %>%
filter(participant_looking != "face")
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~participant_looking_char + shortname + subid + target_object, data = .) %>%
as.data.frame() %>%
filter(participant_looking_char != "face")
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
select(subid, condition) %>%
unique() %>%
left_join(all.exp, by = "subid")
all.exp %>%
group_by(condition, shortname) %>%
summarise(n())
all.exp %>%
group_by(condition, shortname, participant_looking_char) %>%
summarise(n())
all.exp %>%
group_by(condition, shortname, participant_looking_char)
all.exp %>%
group_by(condition, shortname, participant_looking_char) %>%
summarise(looking = sum(Freq))
all.exp %>%
group_by(condition, participant_looking_char) %>%
summarise(looking = sum(Freq))
# create all.exp,
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~participant_looking_char + shortname + subid + target_object, data = .) %>%
as.data.frame() %>%
filter(participant_looking_char != "face")
# add condition and where gaze was directed
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
select(subid, condition, look) %>%
unique() %>%
left_join(all.exp, by = "subid")
all.exp %>%
group_by(condition, participant_looking_char, look) %>%
summarise(looking = sum(Freq))
exp.looks.to.target <- all.exp%>%
select(shortname, condition) %>%
unique()
ng.exp <- all.exp %>%
filter(condition == "nogaze")
subs <- unique(ng.exp$subid)
trials <- unique(ng.exp$shortname)
total.looks <- 0
counted.trials <- 0
for (trial in trials){
trialtotal <- 0
counted.subs <- 0
for (sub in subs){
temp <- subset(ng.exp, shortname == trial & subid == sub)
left.to.total <- temp[[which(temp$target_object == "left" &
temp$aoi == "left"), "Freq"]] +
temp[[which(temp$target_object == "left" & temp$aoi == "right"), "Freq"]]
right.to.total <- temp[[which(temp$target_object == "right" &
temp$aoi == "left"), "Freq"]] +
temp[[which(temp$target_object == "right" & temp$aoi == "right"), "Freq"]]
if(left.to.total + right.to.total != 0){
if(left.to.total == 0){
correct_TO = "right"
incorrect_TO = "left"
} else{
correct_TO = "left"
incorrect_TO = "right"
}
temp <- subset(temp, target_object == correct_TO)
corr <- temp[[which(temp$aoi == correct_TO), "Freq"]]
incorr <- temp[[which(temp$aoi == incorrect_TO), "Freq"]]
target <- corr / (corr+incorr)
all.exp$exptarget[all.exp$subid == sub & all.exp$shortname == trial &
all.exp$target_object == correct_TO] <- target
total.looks <- total.looks + target
counted.trials = counted.trials + 1
counted.subs = counted.subs + 1
trialtotal <- trialtotal + target
}
}
trialmean <- trialtotal / counted.subs
exp.looks.to.target$targetprop[exp.looks.to.target$shortname == trial &
exp.looks.to.target$condition == "nogaze"] <-trialmean
}
#proportion of looks to left object across No Gaze exposure trials
nsmean <- total.looks / counted.trials
nsmean
View(exp.looks.to.target)
View(ng.exp)
#create table for looks to target by trial name (exposure only)
exp.looks.to.target <- all.exp%>%
select(shortname, condition) %>%
unique()
#nogaze: proportion of looking to the left over both objects for each trial
ng.exp <- all.exp %>%
filter(condition == "nogaze")
subs <- unique(ng.exp$subid)
trials <- unique(ng.exp$shortname)
total.looks <- 0
counted.trials <- 0
for (trial in trials){
trialtotal <- 0
counted.subs <- 0
for (sub in subs){
temp <- subset(ng.exp, shortname == trial & subid == sub)
left.to.total <- temp[[which(temp$target_object == "left" &
temp$participant_looking_char == "left"), "Freq"]] +
temp[[which(temp$target_object == "left" & temp$participant_looking_char == "right"), "Freq"]]
right.to.total <- temp[[which(temp$target_object == "right" &
temp$participant_looking_char == "left"), "Freq"]] +
temp[[which(temp$target_object == "right" & temp$participant_looking_char == "right"), "Freq"]]
if(left.to.total + right.to.total != 0){
if(left.to.total == 0){
correct_TO = "right"
incorrect_TO = "left"
} else{
correct_TO = "left"
incorrect_TO = "right"
}
temp <- subset(temp, target_object == correct_TO)
corr <- temp[[which(temp$participant_looking_char == correct_TO), "Freq"]]
incorr <- temp[[which(temp$participant_looking_char == incorrect_TO), "Freq"]]
target <- corr / (corr+incorr)
all.exp$exptarget[all.exp$subid == sub & all.exp$shortname == trial &
all.exp$target_object == correct_TO] <- target
total.looks <- total.looks + target
counted.trials = counted.trials + 1
counted.subs = counted.subs + 1
trialtotal <- trialtotal + target
}
}
trialmean <- trialtotal / counted.subs
exp.looks.to.target$targetprop[exp.looks.to.target$shortname == trial &
exp.looks.to.target$condition == "nogaze"] <-trialmean
}
#proportion of looks to left object across No Gaze exposure trials
nsmean <- total.looks / counted.trials
nsmean
View(exp.looks.to.target)
#gaze: proportion of looking to object of gaze for each trial
g.exp <- all.exp %>%
filter(condition == "gaze")
subs <- unique(g.exp$subid)
trials <- unique(g.exp$shortname)
total.looks <- 0
counted.trials <- 0
for (trial in trials){
trialtotal <- 0
counted.subs <- 0
for (sub in subs){
temp <- subset(g.exp, shortname == trial & subid == sub)
left.to.total <- temp[[which(temp$target_object == "left" &
temp$participant_looking_char == "left"), "Freq"]] +
temp[[which(temp$target_object == "left" & temp$participant_looking_char == "right"), "Freq"]]
right.to.total <- temp[[which(temp$target_object == "right" &
temp$participant_looking_char == "left"), "Freq"]] +
temp[[which(temp$target_object == "right" & temp$participant_looking_char == "right"), "Freq"]]
if(left.to.total + right.to.total != 0){
if(left.to.total == 0){
correct_TO = "right"
incorrect_TO = "left"
} else{
correct_TO = "left"
incorrect_TO = "right"
}
temp <- subset(temp, target_object == correct_TO)
corr <- temp[[which(temp$participant_looking_char == correct_TO), "Freq"]]
incorr <- temp[[which(temp$participant_looking_char == incorrect_TO), "Freq"]]
target <- corr / (corr+incorr)
all.exp$exptarget[all.exp$subid == sub & all.exp$shortname == trial &
all.exp$target_object == correct_TO] <- target
total.looks <- total.looks + target
counted.trials = counted.trials + 1
counted.subs = counted.subs + 1
trialtotal <- trialtotal + target
}
}
trialmean <- trialtotal / counted.subs
exp.looks.to.target$targetprop[exp.looks.to.target$shortname == trial &
exp.looks.to.target$condition == "gaze"] <-trialmean
}
#proportion of looks to left object across Gaze exposure trials
socmean <- total.looks / counted.trials
all.exp <- all.exp %>%
filter(!is.na(exptarget))
socmean
g.exp <- all.exp %>%
filter(condition == "gaze")
subs <- unique(g.exp$subid)
trials <- unique(g.exp$shortname)
total.looks <- 0
counted.trials <- 0
for (trial in trials){
trialtotal <- 0
counted.subs <- 0
for (sub in subs){
temp <- subset(g.exp, shortname == trial & subid == sub)
left.to.total <- temp[[which(temp$target_object == "left" &
temp$participant_looking_char == "left"), "Freq"]] +
temp[[which(temp$target_object == "left" & temp$participant_looking_char == "right"), "Freq"]]
right.to.total <- temp[[which(temp$target_object == "right" &
temp$participant_looking_char == "left"), "Freq"]] +
temp[[which(temp$target_object == "right" & temp$participant_looking_char == "right"), "Freq"]]
if(left.to.total + right.to.total != 0){
if(left.to.total == 0){
correct_TO = "right"
incorrect_TO = "left"
} else{
correct_TO = "left"
incorrect_TO = "right"
}
temp <- subset(temp, target_object == correct_TO)
corr <- temp[[which(temp$participant_looking_char == correct_TO), "Freq"]]
incorr <- temp[[which(temp$participant_looking_char == incorrect_TO), "Freq"]]
target <- corr / (corr+incorr)
all.exp$exptarget[all.exp$subid == sub & all.exp$shortname == trial &
all.exp$target_object == correct_TO] <- target
total.looks <- total.looks + target
counted.trials = counted.trials + 1
counted.subs = counted.subs + 1
trialtotal <- trialtotal + target
}
}
trialmean <- trialtotal / counted.subs
exp.looks.to.target$targetprop[exp.looks.to.target$shortname == trial &
exp.looks.to.target$condition == "gaze"] <-trialmean
}
socmean <- total.looks / counted.trials
all.exp <- all.exp %>%
filter(!is.na(exptarget))
socmean
total.looks
counted.trials
all.exp
rm(list = ls())
library(dplyr)
library(readr)
library(magrittr)
library(ggplot2)
library(tidyr)
library(knitr)
library(lme4)
## output: d (mastersheet with times, trial, subject, condition, and gazes)
## input: processed data spreadsheet, subject info spreadsheet, trial info
#read in processed data
d <- read_csv("processed_data_adult/processed_adult.csv")
# join subject info
subinfo <- read_csv("info/subinfo_adult.csv")
d %<>%
mutate(subid = gsub(".txt", "", subid)) %>%
left_join(subinfo)
# join trial info
trialinfo <- read_csv("info/trialinfo.csv")
d %<>% left_join(trialinfo, by = "stimulus")
# filter out unusable participants
d %<>% filter(keep == "y")
d %>%
select(subid, condition) %>%
unique() %>%
group_by(condition) %>%
summarise(n()) %>%
kable()
d_descrip <- d %>%
group_by(subid) %>%
select(subid, shortname, trial.type) %>%
unique() %>%
group_by(subid, trial.type) %>%
summarise(count = n())
d_descrip %>% kable()
d %<>% mutate(participant_looking_factor = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x < 1230 & x > 690 & y > 540, "face", NA)))),
participant_looking_char = as.character(participant_looking_factor))
# create all.exp,
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
xtabs(~participant_looking_char + shortname + subid + target_object, data = .) %>%
as.data.frame() %>%
filter(participant_looking_char != "face")
# add condition and where gaze was directed
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
select(subid, condition, look) %>%
unique() %>%
left_join(all.exp, by = "subid")
all.exp %>%
group_by(condition, participant_looking_char, look) %>%
summarise(looking = sum(Freq))
all.exp %>%
group_by(condition, participant_looking_char, subid) %>%
summarise(looking = sum(Freq))
tmp <- all.exp %>%
group_by(condition, participant_looking_char, subid) %>%
summarise(looking = sum(Freq))
View(tmp)
tmp <- all.exp %>%
group_by(condition, participant_looking_char, subid, look) %>%
summarise(looking = sum(Freq))
all.exp %>%
mutate(freq_correct = ifelse(target_object == participant_looking_char, TRUE, FALSE),
freq_gaze_follow = ifelse(look == participant_looking_char, TRUE, FALSE))
all.exp %<>%
mutate(freq_correct = ifelse(target_object == participant_looking_char, TRUE, FALSE),
freq_gaze_follow = ifelse(look == participant_looking_char, TRUE, FALSE))
all.test <- d %>%
filter(trial.type == "test" & participant_looking_char != "face") %>%
xtabs(~participant_looking_char + shortname + subid + target_object, .) %>%
as.data.frame() %>%
filter(participant_looking_char != "face")
all.test <- d %>%
filter(trial.type == "test" & participant_looking_char != "face") %>%
select(subid, condition) %>%
unique() %>%
left_join(all.test, by = "subid")
