<<<<<<< HEAD
################################################################################
## PREPROCESSING SCRIPT FOR GAZE-XSIT
## read in data files and consolidate them
##
## mcf ad 7/15
################################################################################
## PRELIMINARIES
rm(list = ls())
library(dplyr)
library(readr)
library(magrittr)
source("et_helper.R")
raw.data.path <- "ettest/"
processed.data.path <- "processed_data_ettest/"
## LOOP TO READ IN FILES
all.data <- data.frame()
files <- dir(raw.data.path,pattern="*.txt")
for (file.name in files) {
print(file.name)
## these are the two functions that are most meaningful
d <- read.smi.idf(paste(raw.data.path,file.name,sep=""), header.rows=32)
d <- preprocess.data(d)
d$subid <- file.name
## now here's where data get bound together
all.data <- bind_rows(all.data, d)
}
## WRITE DATA OUT TO CSV FOR EASY ACCESS
write_csv(all.data, paste0(processed.data.path, "processed_ettest.csv"))
getwd()
setwd("Projects")
setwd("Documents")
setwd("Projects")
setwd("gaze-xsit")
## PRELIMINARIES
rm(list = ls())
library(dplyr)
library(readr)
library(magrittr)
source("et_helper.R")
raw.data.path <- "ettest/"
processed.data.path <- "processed_data_ettest/"
## LOOP TO READ IN FILES
all.data <- data.frame()
files <- dir(raw.data.path,pattern="*.txt")
for (file.name in files) {
print(file.name)
## these are the two functions that are most meaningful
d <- read.smi.idf(paste(raw.data.path,file.name,sep=""), header.rows=32)
d <- preprocess.data(d)
d$subid <- file.name
## now here's where data get bound together
all.data <- bind_rows(all.data, d)
}
## WRITE DATA OUT TO CSV FOR EASY ACCESS
write_csv(all.data, paste0(processed.data.path, "processed_ettest.csv"))
rm(list = ls())
library(dplyr)
library(readr)
library(magrittr)
library(ggplot2)
library(tidyr)
library(lme4)
## output: d (mastersheet with times, trial, subject, condition, and gazes)
## input: processed data spreadsheet, subject info spreadsheet, trial info
#read in processed data
d <- read_csv("processed_data_ettest/processed_ettest.csv")
# join subject info
#subinfo <- read_csv("info/subinfo_adult.csv")
=======
select(-condition)
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
select(subid, condition, trial_num, look) %>%
unique() %>%
left_join(all.exp, by = c("subid", "trial_num"))
View(all.exp)
# create exposure trial data frame
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, trial_num, condition, participant_looking_char) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, participant_looking_char,
fill = list(count = 0)) %>%
arrange(subid) %>%
select(-condition) # here we remove condition since it has NAs after the complete function
# add condition and where gaze was directed
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
select(subid, condition, trial_num, look, correct, gaze_follow) %>%
unique() %>%
left_join(all.exp, by = c("subid", "trial_num"))
View(all.exp)
# create exposure trial data frame
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, trial_num, condition, participant_looking_char) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, participant_looking_char,
fill = list(count = 0)) %>%
arrange(subid) %>%
select(-condition) # here we remove condition since it has NAs after the complete function
# add condition and where gaze was directed
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
select(subid, condition, trial_num, look) %>%
unique() %>%
left_join(all.exp, by = c("subid", "trial_num"))
View(all.exp)
names(all.exp)
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, trial_num, condition, gaze_follow) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, gaze_follow,
fill = list(count = 0)) %>%
arrange(subid) %>%
select(-condition)
View(all.exp)
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
select(subid, condition, trial_num, look) %>%
unique() %>%
left_join(all.exp, by = c("subid", "trial_num"))
View(all.exp)
# create exposure trial data frame
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, trial_num, condition, gaze_follow) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, gaze_follow,
fill = list(count = 0)) %>%
arrange(subid) %>%
select(-condition) # here we remove condition since it has NAs after the complete function
# add condition and where gaze was directed
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
select(subid, condition, trial_num, look, participant_looking_char) %>%
unique() %>%
left_join(all.exp, by = c("subid", "trial_num"))
View(all.exp)
# create exposure trial data frame
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, trial_num, condition, gaze_follow) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, gaze_follow,
fill = list(count = 0)) %>%
arrange(subid) %>%
select(-condition) # here we remove condition since it has NAs after the complete function
# add condition and where gaze was directed
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
select(subid, condition, trial_num, look, participant_looking_char) %>%
unique() %>%
left_join(all.exp, by = c("subid", "trial_num"))
View(all.exp)
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, trial_num, condition, gaze_follow) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, gaze_follow,
fill = list(count = 0)) %>%
arrange(subid) %>%
select(-condition)
d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
select(subid, condition, trial_num, look, participant_looking_char) %>%
unique()
# create exposure trial data frame
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, trial_num, condition, gaze_follow) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, gaze_follow,
fill = list(count = 0)) %>%
arrange(subid) %>%
select(-condition) # here we remove condition since it has NAs after the complete function
# add condition and where gaze was directed
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
select(subid, condition, trial_num, look) %>%
unique() %>%
left_join(all.exp, by = c("subid", "trial_num"))
View(all.exp)
# create exposure trial data frame
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, trial_num, condition, participant_looking_char) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, participant_looking_char,
fill = list(count = 0)) %>%
arrange(subid) %>%
select(-condition) # here we remove condition since it has NAs after the complete function
# add condition and where gaze was directed
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
select(subid, condition, trial_num, look) %>%
unique() %>%
left_join(all.exp, by = c("subid", "trial_num"))
View(all.exp)
ms_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(condition) %>%
summarise(mean_accuracy_exp = mean(correct))
View(ms_correct_exposure)
ms_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(condition, shortname) %>%
summarise(mean_accuracy_exp = mean(correct))
View(ms_correct_exposure)
ms_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(condition, trial.type) %>%
summarise(mean_accuracy_exp = mean(correct))
View(ms_correct_exposure)
names(d)
ms_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(condition, correct) %>%
summarise(mean_accuracy_exp = mean(correct))
View(ms_correct_exposure)
ms_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(condition, trial_num) %>%
summarise(mean_accuracy_exp = mean(correct))
View(ms_correct_exposure)
str(d)
d %<>% mutate(participant_looking_factor = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x < 1230 & x > 690 & y > 540, "face", "away")))),
participant_looking_char = as.character(participant_looking_factor))
# add trial numbers
trial_num <- c(c("fam", "fam", "fam", "fam"), seq(1,16))
d %<>%
select(subid, shortname) %>%
unique() %>%
group_by(subid) %>%
cbind(trial_num) %>%
mutate(trial_num = as.character(trial_num)) %>%
left_join(., d, by = c("subid", "shortname"))
str(d)
## output: d (mastersheet with times, trial, subject, condition, and gazes)
## input: processed data spreadsheet, subject info spreadsheet, trial info
#read in processed data
d <- read_csv("processed_data_adult/processed_adult.csv")
# join subject info
subinfo <- read_csv("info/subinfo_adult.csv")
d %<>%
mutate(subid = gsub(".txt", "", subid)) %>%
left_join(subinfo)
# join trial info
trialinfo <- read_csv("info/trialinfo.csv")
d %<>% left_join(trialinfo, by = "stimulus")
# filter out unusable participants
d %<>% filter(keep == "y")
## output: d (mastersheet with times, trial, subject, condition, and gazes)
## input: processed data spreadsheet, subject info spreadsheet, trial info
#read in processed data
d <- read_csv("processed_data_adult/processed_adult.csv")
# join subject info
subinfo <- read_csv("info/subinfo_adult.csv")
>>>>>>> 5d95cb370c07556de10fc7fe48dabf0c3d89f6b7
d %<>%
mutate(subid = gsub(".txt", "", subid)) %>%
left_join(subinfo)
# join trial info
trialinfo <- read_csv("info/trialinfo.csv")
d %<>% left_join(trialinfo, by = "stimulus")
# filter out unusable participants
d %<>% filter(keep == "y")
<<<<<<< HEAD
trialinfo <- read_csv("info/trialinfo.csv")
d %<>% left_join(trialinfo, by = "stimulus")
# label AOIs
d %<>% mutate(aoi = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x < 1230 & x > 690 & y > 540, "face", NA)))))
# create all.exp,
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~aoi + shortname + subid + target_object, .) %>%
as.data.frame() %>%
filter(aoi != "face")
#this is redundant -- look at this
=======
d %>%
select(subid, condition) %>%
unique() %>%
group_by(condition) %>%
summarise(n()) %>%
kable()
d_descrip <- d %>%
group_by(subid) %>%
select(subid, shortname, trial.type) %>%
unique() %>%
group_by(subid) %>%
summarise(count = n())
d_descrip %>% kable()
d %<>% mutate(participant_looking_factor = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x < 1230 & x > 690 & y > 540, "face", "away")))),
participant_looking_char = as.character(participant_looking_factor))
# add trial numbers
trial_num <- c(c("fam", "fam", "fam", "fam"), seq(1,16))
d %<>%
select(subid, shortname) %>%
unique() %>%
group_by(subid) %>%
cbind(trial_num) %>%
mutate(trial_num = as.character(trial_num)) %>%
left_join(., d, by = c("subid", "shortname"))
str(d)
d %<>% mutate(correct = ifelse(target_object == participant_looking_char, TRUE, FALSE),
gaze_follow = ifelse(look == participant_looking_char, TRUE, FALSE))
# create exposure trial data frame
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, trial_num, condition, participant_looking_char) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, participant_looking_char,
fill = list(count = 0)) %>%
arrange(subid) %>%
select(-condition) # here we remove condition since it has NAs after the complete function
# add condition and where gaze was directed
>>>>>>> 5d95cb370c07556de10fc7fe48dabf0c3d89f6b7
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
select(subid, condition, trial_num, look) %>%
unique() %>%
<<<<<<< HEAD
left_join(all.exp, by = "subid")
View(trialinfo)
=======
left_join(all.exp, by = c("subid", "trial_num"))
View(d)
ms_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(condition, trial_num) %>%
summarise(mean_accuracy_exp = mean(correct))
View(ms_correct_exposure)
ms_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(condition, as.numeric(trial_num)) %>%
summarise(mean_accuracy_exp = mean(correct))
View(ms_correct_exposure)
ms_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, as.numeric(trial_num)) %>%
summarise(mean_accuracy_exp = mean(correct))
View(all.exp)
ms_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy_exp = mean(correct))
View(ms_correct_exposure)
ss_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy_exp = mean(correct))
ggplot(aes(x=mean_accuracy_exp), data = ss_correct_exposure)
theme_set(theme_bw())
ss_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy_exp = mean(correct))
ggplot(aes(x=mean_accuracy_exp), data = ss_correct_exposure) +
geom_density()
ggplot(aes(x=mean_accuracy_exp), data = ss_correct_exposure) +
geom_density(fill = condition)
View(ss_correct_exposure)
ggplot(aes(x=mean_accuracy_exp), fill = condition,
data = ss_correct_exposure) +
geom_density()
ggplot(aes(x=mean_accuracy_exp), fill = condition,
data = ss_correct_exposure) +
geom_density()
ggplot(aes(x=mean_accuracy_exp), color = condition,
data = ss_correct_exposure) +
geom_density()
ggplot(aes(x=mean_accuracy_exp), color = condition,
data = ss_correct_exposure) +
geom_histogram()
ggplot(aes(x=mean_accuracy_exp, color = condition),
data = ss_correct_exposure) +
geom_histogram()
ggplot(aes(x=mean_accuracy_exp, fill = condition),
data = ss_correct_exposure) +
geom_histogram()
ggplot(aes(x=mean_accuracy_exp, fill = condition),
data = ss_correct_exposure) +
geom_density()
ggplot(aes(x=mean_accuracy_exp, fill = condition),
data = ss_correct_exposure) +
geom_density(alpha = 0.5)
ss_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy_exp = mean(correct))
ggplot(aes(x=mean_accuracy_exp, fill = condition),
data = ss_correct_exposure) +
geom_density(alpha = 0.5) +
facet_wrap(~condition)
ss_gf_exposure <- d %>%
filter(trial.type == "exposure", participant_looking_char %in% c("left", "right"),
condition == "gaze") %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy_exp = mean(gaze_follow))
View(ss_gf_exposure)
ss_gf_exposure <- d %>%
filter(trial.type == "exposure", participant_looking_char %in% c("left", "right"),
condition == "gaze") %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_gf_exp = mean(gaze_follow))
ggplot(aes(x=mean_gf_exp),
data = ss_gf_exposure) +
geom_density(alpha = 0.5) +
facet_wrap(~condition) +
xlab("Mean Gaze Following Scores")
ss_gf_exposure <- d %>%
filter(trial.type == "exposure", participant_looking_char %in% c("left", "right"),
condition == "gaze") %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_gf_exp = mean(gaze_follow))
ggplot(aes(x=mean_gf_exp, fill = condition),
data = ss_gf_exposure) +
geom_density(alpha = 0.5) +
xlab("Mean Gaze Following Scores")
ggplot(aes(x=mean_gf_exp, fill = condition),
data = ss_gf_exposure) +
geom_histogram()
ggplot(aes(x=mean_gf_exp, fill = condition),
data = ss_gf_exposure) +
geom_histogram() +
geom_density(alpha = 0.5) +
xlab("Mean Gaze Following Scores")
ss_gf_exposure <- d %>%
filter(trial.type == "exposure", participant_looking_char %in% c("left", "right"),
condition == "gaze") %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_gf_exp = mean(gaze_follow))
ggplot(aes(x=mean_gf_exp, fill = condition),
data = ss_gf_exposure) +
geom_histogram() +
xlab("Mean Gaze Following Scores")
ss_gf_exposure <- d %>%
filter(trial.type == "exposure", participant_looking_char %in% c("left", "right"),
condition == "gaze") %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_gf_exp = mean(gaze_follow))
ggplot(aes(x=mean_gf_exp),
data = ss_gf_exposure) +
geom_histogram() +
xlab("Mean Gaze Following Scores")
ggplot(aes(x=mean_accuracy_exp, fill = condition),
data = ss_correct_exposure) +
geom_histogram()
ggplot(aes(x=mean_accuracy_exp, fill = condition),
data = ss_correct_exposure) +
geom_histogram() +
geom_density(alpha = 0.5) +
facet_wrap(~condition) +
xlab("Mean Accuracy Scores")
ss_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy_exp = mean(correct))
ggplot(aes(x=mean_accuracy_exp, fill = condition),
data = ss_correct_exposure) +
geom_density(alpha = 0.5) +
facet_wrap(~condition) +
xlab("Mean Accuracy Scores")
ss_gf_exposure <- d %>%
filter(trial.type == "exposure", participant_looking_char %in% c("left", "right"),
condition == "gaze") %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_gf_exp = mean(gaze_follow))
ggplot(aes(x=mean_gf_exp),
data = ss_gf_exposure) +
geom_histogram() +
xlab("Mean Gaze Following Scores")
View(all.exp)
77 + 25
77/102
mean(ss_gf_exposure$mean_gf_exp)
ss_gf_exposure <- d %>%
filter(trial.type == "exposure", participant_looking_char %in% c("left", "right"),
condition == "gaze") %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_gf_exp = mean(gaze_follow))
ggplot(aes(x=mean_gf_exp),
data = ss_gf_exposure) +
geom_histogram() +
xlab("Mean Gaze Following Scores")
mean(ss_gf_exposure$mean_gf_exp)
ss_acc_test <- d %>%
filter(trial.type == "test", participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy = mean(correct))
View(ss_acc_test)
tmp <- filter(d, Sub.Num == "pn11", trial_num == "1")
tmp <- filter(d, subid == "pn11", trial_num == "1")
View(tmp)
names(d)
ss_acc_test <- d %>%
filter(trial.type == "test", participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy = mean(correct))
View(ss_acc_test)
ggplot(aes(x=mean_accuracy),
data = ss_acc_test) +
geom_histogram() +
xlab("Mean Accuracy")
ss_acc_test <- d %>%
filter(trial.type == "test", participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy = mean(correct))
ggplot(aes(x=mean_accuracy),
data = ss_acc_test) +
geom_histogram() +
xlab("Mean Accuracy") +
facet_wrap(~condition)
ss_acc_exp <- d %>%
filter(participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num), trial.type) %>%
summarise(mean_accuracy = mean(correct))
ss_acc_exp <- d %>%
filter(trial.type != "fam", participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num), trial.type) %>%
summarise(mean_accuracy = mean(correct))
d %>%
filter(trial.type != "fam", participant_looking_char %in% c("left", "right"))
ss_acc_exp <- d %>%
filter(trial.type != "fam", participant_looking_char %in% c("left", "right"))
View(ss_acc_exp)
ss_acc_exp <- d %>%
filter(trial.type != "familiar", participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num), trial.type) %>%
summarise(mean_accuracy = mean(correct))
View(ss_acc_exp)
ss_acc_exp <- d %>%
filter(trial.type != "familiar", participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num), trial.type) %>%
summarise(mean_accuracy = mean(correct)) %>%
spread(trial.type, mean_accuracy)
View(ss_acc_exp)
ggplot(aes(x = exposure, y = test), data = ss_acc_exp) +
geom_point()
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_exp) +
geom_point()
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_exp) +
geom_point() +
geom_smooth()
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_exp) +
geom_point() +
geom_smooth(method = "lm")
?cut
ms <- ss_acc_exp %>%
mutate(exptarget_bin = cut(exposure, 4)) %>%
group_by(exptarget.bin, condition) %>%
multi_boot_standard(column = "test")
ms <- ss_acc_exp %>%
mutate(exptarget_bin = cut(exposure, 4)) %>%
group_by(exptarget_bin, condition) %>%
multi_boot_standard(column = "test")
ms
ss_acc_exp %>% mutate(exptarget_bin = cut(exposure, 4))
ss_acc_exp %<>% mutate(exptarget_bin = cut(exposure, 4))
ms <- ss_acc_exp %>%
group_by(exptarget_bin, condition) %>%
multi_boot_standard(column = "test", na.rm = T)
View(ms)
ggplot(aes(x = exptarget_bin, y = mean), data = ms) +
geom_bar(stat = "identity")
ggplot(aes(x = exptarget_bin, y = mean, fill = condition), data = ms) +
geom_bar(stat = "identity")
ggplot(aes(x = exptarget_bin, y = mean, fill = condition), data = ms) +
geom_bar(stat = "identity", position = position_dodge())
ggplot(aes(x = exptarget_bin, y = mean, fill = condition), data = ms) +
geom_bar(stat = "identity", position = position_dodge()) +
geom_errorbar(aes(ymin = ci_lower, ymax = ci_upper), position = position_dodge(width = 0.9))
ggplot(aes(x = exptarget_bin, y = mean, fill = condition), data = ms) +
geom_bar(stat = "identity", position = position_dodge()) +
geom_linerange(aes(ymin = ci_lower, ymax = ci_upper), position = position_dodge(width = 0.9))
>>>>>>> 5d95cb370c07556de10fc7fe48dabf0c3d89f6b7
rm(list = ls())
library(dplyr)
library(readr)
library(magrittr)
library(ggplot2)
library(tidyr)
<<<<<<< HEAD
library(lme4)
d <- read_csv("processed_data_ettest/processed_ettest.csv")
trialinfo <- read_csv("info/trialinfo.csv")
d %<>% left_join(trialinfo, by = "stimulus")
View(d)
d %<>% mutate(aoi = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x < 1230 & x > 690 & y > 540, "face", NA)))))
# create all.exp,
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~aoi + shortname + subid + target_object, .) %>%
as.data.frame() %>%
filter(aoi != "face")
#this is redundant -- look at this
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
select(subid, condition) %>%
unique() %>%
left_join(all.exp, by = "subid")
View(d)
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~aoi + shortname  + target_object, .) %>%
as.data.frame() %>%
filter(aoi != "face")
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
unique()
g.exp <- all.exp
View(g.exp)
g.exp %>%
group_by(shortname, aoi) %>%
summarise(count = n())
g.exp %>%
group_by(shortname, aoi, look) %>%
summarise(num_time_slices = n())
g.exp %>%
group_by(shortname, aoi, look) %>%
summarise(num_time_slices = n()) %>%
mutate(gaze_target = ifelse(aoi == look, "gaze_target", "not_gaze_target"))
trial_df <- g.exp %>%
group_by(shortname, aoi, look) %>%
summarise(num_time_slices = n()) %>%
mutate(gaze_target = ifelse(aoi == look, "gaze_target", "not_gaze_target"))
trial_df %>%
group_by(shortname, aoi, look) %>%
summarise(total_time_slices = sum(num_time_slices))
trial_df %>%
group_by(shortname) %>%
summarise(total_time_slices = sum(num_time_slices))
trial_df %>%
group_by(shortname) %>%
summarise(total_time_slices = sum(num_time_slices)) %>%
left_join(trial_df, ., by = "shortname")
trial_df %>%
group_by(shortname) %>%
summarise(total_time_slices = sum(num_time_slices)) %>%
left_join(trial_df, ., by = "shortname") %>%
mutate(prop_looking = num_time_slices / total_time_slices)
trial_df <- trial_df %>%
group_by(shortname) %>%
summarise(total_time_slices = sum(num_time_slices)) %>%
left_join(trial_df, ., by = "shortname") %>%
mutate(prop_looking = num_time_slices / total_time_slices)
trial_df %>%
group_by(gaze_target) %>%
summarise(m_gf = mean(prop_looking))
trial_df %>%
group_by(gaze_target) %>%
summarise(m_gf = mean(prop_looking)) %>%
qplot(x=gaze_target, y=m_gf)
trial_df %>%
group_by(gaze_target) %>%
summarise(m_gf = mean(prop_looking)) %>%
qplot(x=gaze_target, y=m_gf, data = .)
trial_df %>%
group_by(gaze_target) %>%
summarise(m_gf = mean(prop_looking)) %>%
qplot(x=gaze_target, y=m_gf, data = ., geoms = "bar")
trial_df %>%
group_by(gaze_target) %>%
summarise(m_gf = mean(prop_looking)) %>%
ggplot(aes(x=gaze_target, y = m_gf), data = .)
trial_df %>%
group_by(gaze_target) %>%
summarise(m_gf = mean(prop_looking)) %>%
ggplot(aes(x=gaze_target, y = m_gf), data = .) +
geom_bar()
trial_df %>%
group_by(gaze_target) %>%
summarise(m_gf = mean(prop_looking)) %>%
ggplot(aes(x=gaze_target, y = m_gf), data = .) +
geom_bar(stat = "identity")
trial_df %>%
group_by(gaze_target) %>%
summarise(m_gf = mean(prop_looking)) %>%
ggplot(aes(x=gaze_target, y = m_gf), data = .) +
geom_bar(stat = "identity") +
theme_bw()
g.test <- all.test
all.test <- d %>%
filter(trial.type == "test" & aoi != "face") %>%
xtabs(~aoi + shortname + target_object, .) %>%
as.data.frame() %>%
filter(aoi != "face")
all.test <- d %>%
filter(trial.type == "test" & aoi != "face") %>%
unique()
g.test <- all.test
trial_df <- g.test %>%
group_by(shortname, aoi, look) %>%
summarise(num_time_slices = n()) %>%
mutate(gaze_target = ifelse(aoi == look, "gaze_target", "not_gaze_target"))
### compute prop looking
trial_df <- trial_df %>%
group_by(shortname) %>%
summarise(total_time_slices = sum(num_time_slices)) %>%
left_join(trial_df, ., by = "shortname") %>%
mutate(prop_looking = num_time_slices / total_time_slices)
### visualize gaze following
trial_df %>%
group_by(gaze_target) %>%
summarise(m_gf = mean(prop_looking)) %>%
ggplot(aes(x=gaze_target, y = m_gf), data = .) +
geom_bar(stat = "identity") +
theme_bw()
View(trial_df)
View(d)
View(all.test)
trial_df <- all.test %>%
group_by(shortname, aoi, look) %>%
summarise(num_time_slices = n()) %>%
mutate(gaze_target = ifelse(aoi == look, "gaze_target", "not_gaze_target"))
### compute prop looking
trial_df <- trial_df %>%
group_by(shortname) %>%
summarise(total_time_slices = sum(num_time_slices)) %>%
left_join(trial_df, ., by = "shortname") %>%
mutate(prop_looking = num_time_slices / total_time_slices)
### visualize gaze following
trial_df %>%
group_by(gaze_target) %>%
summarise(m_gf = mean(prop_looking)) %>%
ggplot(aes(x=gaze_target, y = m_gf), data = .) +
geom_bar(stat = "identity") +
theme_bw()
View(all.test)
View(d)
View(d)
d %>%
filter(trial.type == "exposure") %>%
mutate(same_switch_trial = ifelse(target_object == look, "same", "switch"))
tmp <- d %>%
filter(trial.type == "exposure") %>%
mutate(same_switch_trial = ifelse(target_object == look, "same", "switch"))
View(g.exp)
View(tmp)
tmp <- d %>%
filter(trial.type == "exposure") %>%
mutate(same_switch_trial = ifelse(target_object == look, "same", "switch")) %>%
select(shortname, same_switch_trial)
tmp <- d %>%
filter(trial.type == "exposure") %>%
mutate(same_switch_trial = ifelse(target_object == look, "same", "switch")) %>%
select(shortname, same_switch_trial)
left_join(d, ., by = "shortname")
tmp <- d %>%
filter(trial.type == "exposure") %>%
mutate(same_switch_trial = ifelse(target_object == look, "same", "switch")) %>%
select(shortname, same_switch_trial) %>%
left_join(d, ., by = "shortname")
d %<>%
filter(trial.type == "exposure") %>%
mutate(same_switch_trial = ifelse(target_object == look, "same", "switch")) %>%
select(shortname, same_switch_trial) %>%
left_join(d, ., by = "shortname")
d %<>% mutate(aoi = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x < 1230 & x > 690 & y > 540, "face", NA)))))
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
xtabs(~aoi + shortname  + target_object, .) %>%
as.data.frame() %>%
filter(aoi != "face")
#this is redundant -- look at this
all.exp <- d %>%
filter(trial.type == "exposure" & aoi != "face") %>%
unique()
g.test <- all.test
all.test <- d %>%
filter(trial.type == "test" & aoi != "face") %>%
xtabs(~aoi + shortname + target_object, .) %>%
as.data.frame() %>%
filter(aoi != "face")
all.test <- d %>%
filter(trial.type == "test" & aoi != "face") %>%
unique()
trial_df <- trial_df %>%
group_by(shortname, same_switch_trial) %>%
summarise(total_time_slices = sum(num_time_slices)) %>%
left_join(trial_df, ., by = "shortname") %>%
mutate(prop_looking = num_time_slices / total_time_slices)
trial_df <- all.test %>%
group_by(shortname, aoi, look) %>%
summarise(num_time_slices = n()) %>%
mutate(gaze_target = ifelse(aoi == look, "gaze_target", "not_gaze_target"))
View(trial_df)
trial_df <- all.test %>%
group_by(shortname, same_switch_trial) %>%
summarise(num_time_slices = n())
View(trial_df)
trial_df <- all.test %>%
group_by(shortname, aoi, same_switch_trial) %>%
summarise(num_time_slices = n())
View(trial_df)
trial_df <- all.test %>%
group_by(shortname, aoi, target_object, same_switch_trial) %>%
summarise(num_time_slices = n())
trial_df %>%
group_by(shortname, same_switch_trial) %>%
summarise(total_time_slices = sum(num_time_slices)) %>%
left_join(trial_df, ., by = "shortname")
trial_df %>%
group_by(shortname, same_switch_trial) %>%
summarise(total_time_slices = sum(num_time_slices))
trial_df <- all.test %>%
group_by(shortname, aoi, target_object, same_switch_trial) %>%
summarise(num_time_slices = n())
trial_df <- trial_df %>%
group_by(shortname, same_switch_trial) %>%
summarise(total_time_slices = sum(num_time_slices)) %>%
left_join(trial_df, ., by = "shortname") %>%
mutate(prop_looking = num_time_slices / total_time_slices)
trial_df %>%
group_by(same_switch_trial.x) %>%
summarise(m_target_looking = mean(prop_looking)) %>%
ggplot(aes(x=same_switch_trial.x, y = m_target_looking), data = .) +
geom_bar(stat = "identity") +
theme_bw()
trial_df <- trial_df %>%
group_by(shortname, same_switch_trial) %>%
summarise(total_time_slices = sum(num_time_slices)) %>%
left_join(trial_df, ., by = "shortname") %>%
mutate(prop_looking = num_time_slices / total_time_slices,
target_looking = ifelse(aoi == target_object, "target", "distractor"))
trial_df <- all.test %>%
group_by(shortname, aoi, target_object, same_switch_trial) %>%
summarise(num_time_slices = n())
trial_df <- trial_df %>%
group_by(shortname, same_switch_trial) %>%
summarise(total_time_slices = sum(num_time_slices)) %>%
left_join(trial_df, ., by = "shortname") %>%
mutate(prop_looking = num_time_slices / total_time_slices,
target_looking = ifelse(aoi == target_object, "target", "distractor"))
trial_df %>%
group_by(same_switch_trial.x, target_looking) %>%
summarise(m_target_looking = mean(prop_looking)) %>%
ggplot(aes(x=same_switch_trial.x, y = m_target_looking), data = .) +
geom_bar(stat = "identity") +
theme_bw()
trial_df %>%
group_by(same_switch_trial.x, target_looking) %>%
summarise(m_target_looking = mean(prop_looking)) %>%
ggplot(aes(x=same_switch_trial.x, y = m_target_looking, fill = target_looking),
data = .) +
geom_bar(stat = "identity", position = position_dodge()) +
theme_bw()
library(langcog)
trial_df %>%
group_by(same_switch_trial.x, target_looking) %>%
summarise(m_target_looking = mean(prop_looking)) %>%
ggplot(aes(x=same_switch_trial.x, y = m_target_looking, fill = target_looking),
data = .) +
geom_bar(stat = "identity", position = position_dodge()) +
theme_bw() +
theme_fill_solarized()
trial_df %>%
group_by(same_switch_trial.x, target_looking) %>%
summarise(m_target_looking = mean(prop_looking)) %>%
ggplot(aes(x=same_switch_trial.x, y = m_target_looking, fill = target_looking),
data = .) +
geom_bar(stat = "identity", position = position_dodge()) +
theme_bw() +
scale_fill_solarized()
View(d)
d %<>% mutate(aoi = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x == 0 & y == 1050, "away",
ifelse(x < 1230 & x > 690 & y > 540, "face", NA)))))
d %<>% mutate(aoi = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x == 0 & y == 1050, "away",
ifelse(x < 1230 & x > 690 & y > 540, "face", NA)))))
d %<>% mutate(aoi = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x == 0 & y == 1050, "away",
ifelse(x < 1230 & x > 690 & y > 540, "face", NA))))))
View(d)
d %<>% mutate(aoi = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x == 0 & y == 1050, "away",
ifelse(x < 1230 & x > 690 & y > 540, "face", NA))))))
View(d)
d %>%
group_by(aoi) %>%
summarise(count = n())
d %>%
group_by(aoi) %>%
summarise(count = n()) %>%
summarise(prop_away = away / sum(count))
away_looking_df <- d %>%
group_by(aoi) %>%
summarise(count = n())
away_looking_df %<>%
summarise(total_time_slices = sum(count)) %>%
left_join(away_looking_df, .)
away_looking_df %>%
summarise(total_time_slices = sum(count))
away_looking_df %>%
group_by(aoi) %>%
summarise(total_time_slices = sum(count))
away_looking_df %>%
summarise(total_time_slices = sum(count))
away_looking_df %>%
summarise(total_time_slices = sum(count)) %>%
bind_cols(away_looking_df)
away_looking_df %>%
summarise(total_time_slices = sum(count)) %>%
cbind(away_looking_df)
away_looking_df %>%
summarise(total_time_slices = sum(count)) %>%
cbind(away_looking_df) %>%
summarise(prop_looking = count / total_time_slices)
away_looking_df %>%
summarise(total_time_slices = sum(count)) %>%
cbind(away_looking_df) %>%
group_by(aoi) %>%
summarise(prop_looking = count / total_time_slices)
away_looking_df %>%
summarise(total_time_slices = sum(count)) %>%
cbind(away_looking_df) %>%
group_by(aoi) %>%
summarise(prop_looking = count / total_time_slices) %>%
ggplot(aes(x=aoi, y=prop_looking), data = .) +
geom_bar(stat = "identity")
=======
library(knitr)
library(langcog)
library(lme4)
theme_set(theme_bw())
>>>>>>> 5d95cb370c07556de10fc7fe48dabf0c3d89f6b7
