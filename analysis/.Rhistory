names9d
names(d)
?filter
knitr::opts_chunk$set(echo=T, warning=F, cache=T, message=F, sanitize = T)
rm(list = ls())
library(dplyr)
library(readr)
library(magrittr)
library(ggplot2)
library(tidyr)
library(knitr)
library(langcog)
library(lme4)
theme_set(theme_bw())
## output: d (mastersheet with times, trial, subject, condition, and gazes)
## input: processed data spreadsheet, subject info spreadsheet, trial info
#read in processed data
d <- read_csv("../data/processed_data/processed_adult_data.csv")
# join subject info
subinfo <- read_csv("../info/subinfo_adult_n.csv")
d %<>%
mutate(subid = gsub(".txt", "", subid)) %>%
left_join(subinfo)
# join trial info
trialinfo <- read_csv("../info/trialinfo.csv")
d %<>% left_join(trialinfo, by = "stimulus")
# filter out unusable participants
d %<>% filter(keep == "y")
d %>%
select(subid, condition) %>%
unique() %>%
group_by(condition) %>%
summarise(n_subs = n()) %>%
kable()
d_descrip <- d %>%
group_by(subid) %>%
select(subid, shortname, trial.type) %>%
unique() %>%
group_by(subid) %>%
summarise(n_trials = n())
d_descrip %>% kable()
d %<>% mutate(participant_looking_factor = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x < 1230 & x > 690 & y > 540, "face", "away")))),
participant_looking_char = as.character(participant_looking_factor))
# add trial numbers
trial_num <- c(c("fam", "fam", "fam", "fam"), seq(1,16))
d %<>%
select(subid, shortname) %>%
unique() %>%
group_by(subid) %>%
cbind(trial_num) %>%
mutate(trial_num = as.character(trial_num)) %>%
left_join(., d, by = c("subid", "shortname"))
d %<>% mutate(correct = ifelse(target_object == participant_looking_char, TRUE, FALSE),
gaze_follow = ifelse(look == participant_looking_char, TRUE, FALSE))
all.exp <- d %>%
filter(trial.type == "exposure" &
participant_looking_char %in% c("left", "right"))
all.exp <- d %>%
filter(trial.type == "exposure" &
participant_looking_char %in% c("left", "right")) %>%
group_by(subid, trial_num, condition, participant_looking_char) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, participant_looking_char,
fill = list(count = 0)) %>%
arrange(subid) %>%
select(-condition)
View(all.exp)
all.exp <- d %>%
filter(trial.type == "exposure" &
participant_looking_char %in% c("left", "right")) %>%
group_by(subid, trial_num, condition, participant_looking_char, trial.type) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, participant_looking_char,
fill = list(count = 0)) %>%
arrange(subid) %>%
select(-condition)
View(all.exp)
sum(is.na(all.exp$trial.type))
all.exp <- d %>%
filter((trial.type == "exposure" &
participant_looking_char %in% c("left", "right"))) %>%
group_by(subid, trial_num, condition, participant_looking_char, trial.type) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, participant_looking_char,
fill = list(count = 0)) %>%
arrange(subid) %>%
select(-condition)
sum(is.na(all.exp$trial.type))
all.exp <- d %>%
filter((trial.type == "exposure" &
participant_looking_char %in% c("left", "right"))) %>%
group_by(subid, trial_num, condition, participant_looking_char, trial.type) %>%
summarise(count = n())
sum(is.na(all.exp$trial.type))
all.exp <- d %>%
filter((trial.type == "exposure" &
participant_looking_char %in% c("left", "right"))) %>%
group_by(subid, trial_num, condition, participant_looking_char, trial.type) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, participant_looking_char,
fill = list(count = 0)) %>%
arrange(subid) %>%
filter(is.na(trial.type) == F) %>%
select(-condition) # here we remove condition since it has NAs after the complete function
sum(is.na(all.exp$trial.type))
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
select(subid, condition, trial_num, look) %>%
unique() %>%
left_join(all.exp, by = c("subid", "trial_num"))
ss_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy_exp = mean(correct))
ggplot(aes(x=mean_accuracy_exp, fill = condition),
data = ss_correct_exposure) +
geom_density(alpha = 0.5) +
facet_wrap(~condition) +
xlab("Mean Accuracy Scores")
ss_gf_exposure <- d %>%
filter(trial.type == "exposure", participant_looking_char %in% c("left", "right"),
condition == "gaze") %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_gf_exp = mean(gaze_follow))
ggplot(aes(x=mean_gf_exp),
data = ss_gf_exposure) +
geom_density() +
xlab("Mean Gaze Following Scores") +
ggtitle("Gaze Following on each Trial in Gaze Condition")
paste("Mean Gaze Following Score is:", round(mean(ss_gf_exposure$mean_gf_exp), 2))
View(ss_gf_exposure)
View(d)
ss_gf_exposure <- d %>%
filter(trial.type == "exposure", participant_looking_char %in% c("left", "right"),
condition == "gaze") %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_gf_exp = mean(gaze_follow))
ggplot(aes(x=mean_gf_exp),
data = ss_gf_exposure) +
geom_histogram() +
xlab("Mean Gaze Following Scores") +
ggtitle("Gaze Following on each Trial in Gaze Condition")
paste("Mean Gaze Following Score is:", round(mean(ss_gf_exposure$mean_gf_exp), 2))
ss_gf_exposure <- d %>%
filter(trial.type == "exposure", participant_looking_char %in% c("left", "right"),
condition == "gaze") %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_gf_exp = mean(gaze_follow))
ggplot(aes(x=mean_gf_exp),
data = ss_gf_exposure) +
geom_density() +
xlab("Mean Gaze Following Scores") +
ggtitle("Gaze Following on each Trial in Gaze Condition")
paste("Mean Gaze Following Score is:", round(mean(ss_gf_exposure$mean_gf_exp), 2))
ss_acc_test <- d %>%
filter(trial.type == "test", participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy = mean(correct))
ggplot(aes(x=mean_accuracy),
data = ss_acc_test) +
geom_density() +
xlab("Mean Accuracy") +
facet_wrap(~condition)
ss_acc_all <- d %>%
filter(trial.type != "familiar", participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num), trial.type) %>%
summarise(mean_accuracy = mean(correct)) %>%
spread(trial.type, mean_accuracy)
# plot the relation between acc on exposure and acc on test
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point() +
geom_smooth(method = "lm")
ss_acc_all %<>% mutate(exptarget_bin = cut(exposure, 4))
ms <- ss_acc_all %>%
group_by(exptarget_bin, condition) %>%
multi_boot_standard(column = "test", na.rm = T)
ss_acc_all %<>% mutate(exptarget_bin = cut(exposure, 4))
View(ss_acc_all)
?cut
ss_acc_all %<>% mutate(exptarget_bin = cut(exposure, 4))
ss_acc_all %<>% mutate(exptarget_bin = cut(exposure, 2))
apply(ss_acc_all$exposure,2,quantile,na.rm=T)
apply(ss_acc_all$exposure,2,quantile,na.rm=T)
ss_acc_all$exposure
ss_acc_all %<>%
filter(is.na(exposure) == F)
mutate(exptarget_bin = cut(exposure, 4))
ss_acc_all %<>%
filter(is.na(exposure) == F) %>%
mutate(exptarget_bin = cut(exposure, 4))
?quantile
str(ss_acc_all)
ss_acc_all %<>% dplyr::mutate(exptarget_bin = cut(exposure, 4))
?cut
quantile(ss_acc_all$exposure)
cut(ss_acc_all$exposure)
cut(ss_acc_all$exposure, breaks = 2)
cut(ss_acc_all$exposure, breaks = 4)
ss_acc_all %<>% mutate(exptarget_bin = cut(exposure, breaks = 4))
install.packages("dplyr")
install.packages("dplyr")
install.packages("magrittr")
ss_acc_all %<>% mutate(exptarget_bin = cut(exposure, breaks = 4))
rm(list = ls())
library(dplyr)
library(readr)
library(magrittr)
library(ggplot2)
library(tidyr)
library(knitr)
library(langcog)
library(lme4)
theme_set(theme_bw())
## output: d (mastersheet with times, trial, subject, condition, and gazes)
## input: processed data spreadsheet, subject info spreadsheet, trial info
#read in processed data
d <- read_csv("../data/processed_data/processed_adult_data.csv")
# join subject info
subinfo <- read_csv("../info/subinfo_adult_n.csv")
d %<>%
mutate(subid = gsub(".txt", "", subid)) %>%
left_join(subinfo)
# join trial info
trialinfo <- read_csv("../info/trialinfo.csv")
d %<>% left_join(trialinfo, by = "stimulus")
# filter out unusable participants
d %<>% filter(keep == "y")
d %>%
select(subid, condition) %>%
unique() %>%
group_by(condition) %>%
summarise(n_subs = n()) %>%
kable()
d_descrip <- d %>%
group_by(subid) %>%
select(subid, shortname, trial.type) %>%
unique() %>%
group_by(subid) %>%
summarise(n_trials = n())
d_descrip %>% kable()
d %<>% mutate(participant_looking_factor = factor(ifelse(x > 210 & x < 750 & y < 540, "left",
ifelse(x > 1170 & x < 1710 & y < 540, "right",
ifelse(x < 1230 & x > 690 & y > 540, "face", "away")))),
participant_looking_char = as.character(participant_looking_factor))
# add trial numbers
trial_num <- c(c("fam", "fam", "fam", "fam"), seq(1,16))
d %<>%
select(subid, shortname) %>%
unique() %>%
group_by(subid) %>%
cbind(trial_num) %>%
mutate(trial_num = as.character(trial_num)) %>%
left_join(., d, by = c("subid", "shortname"))
d %<>% mutate(correct = ifelse(target_object == participant_looking_char, TRUE, FALSE),
gaze_follow = ifelse(look == participant_looking_char, TRUE, FALSE))
# create exposure trial data frame
all.exp <- d %>%
filter((trial.type == "exposure" &
participant_looking_char %in% c("left", "right"))) %>%
group_by(subid, trial_num, condition, participant_looking_char, trial.type) %>%
summarise(count = n()) %>%
ungroup() %>%
complete(subid, trial_num, participant_looking_char,
fill = list(count = 0)) %>%
arrange(subid) %>%
filter(is.na(trial.type) == F) %>%
select(-condition) # here we remove condition since it has NAs after the complete function
# add condition and where gaze was directed
all.exp <- d %>%
filter(trial.type == "exposure" & participant_looking_char != "face") %>%
select(subid, condition, trial_num, look) %>%
unique() %>%
left_join(all.exp, by = c("subid", "trial_num"))
##double-check exposure trial numbers are consistent across participants
##all.exp group by participant subid & summarise n()
ss_correct_exposure <- d %>%
filter(trial.type == "exposure" & participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy_exp = mean(correct))
ggplot(aes(x=mean_accuracy_exp, fill = condition),
data = ss_correct_exposure) +
geom_density(alpha = 0.5) +
facet_wrap(~condition) +
xlab("Mean Accuracy Scores")
ss_gf_exposure <- d %>%
filter(trial.type == "exposure", participant_looking_char %in% c("left", "right"),
condition == "gaze") %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_gf_exp = mean(gaze_follow))
ggplot(aes(x=mean_gf_exp),
data = ss_gf_exposure) +
geom_density() +
xlab("Mean Gaze Following Scores") +
ggtitle("Gaze Following on each Trial in Gaze Condition")
##think about people at low end; histogram
paste("Mean Gaze Following Score is:", round(mean(ss_gf_exposure$mean_gf_exp), 2))
ss_acc_test <- d %>%
filter(trial.type == "test", participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num)) %>%
summarise(mean_accuracy = mean(correct))
ggplot(aes(x=mean_accuracy),
data = ss_acc_test) +
geom_density() +
xlab("Mean Accuracy") +
facet_wrap(~condition)
ss_acc_all <- d %>%
filter(trial.type != "familiar", participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num), trial.type) %>%
summarise(mean_accuracy = mean(correct)) %>%
spread(trial.type, mean_accuracy)
# plot the relation between acc on exposure and acc on test
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point() +
geom_smooth(method = "lm")
ss_acc_all %<>% mutate(exptarget_bin = cut(exposure, breaks = 4))
ss_acc_all$exptarget_bin <- cut(ss_acc_all, breaks = 4)
ss_acc_all$exptarget_bin <- cut(ss_acc_all$exposure, breaks = 4)
ms <- ss_acc_all %>%
group_by(subid, exptarget_bin, condition) %>%
summarise(mean_acc = mean(test)) %>%
multi_boot_standard(column = "mean_acc", na.rm = T)
View(ms)
ms <- ss_acc_all %>%
group_by(subid, exptarget_bin, condition) %>%
summarise(mean_acc = mean(test))
View(ms)
sum(ss_acc_all$exposure <= 0)
sum(ss_acc_all$exposure < 0)
ss_acc_all$exposure < 0
ms <- ss_acc_all %>%
group_by(subid, exptarget_bin, condition) %>%
summarise(mean_acc = mean(test, na.rm = T)) %>%
multi_boot_standard(column = "mean_acc", na.rm = T)
View(ms)
ms <- ss_acc_all %>%
group_by(subid, exptarget_bin, condition) %>%
summarise(mean_acc = mean(test, na.rm = T)) %>%
group_by(exptarget_bin, condition) %>%
multi_boot_standard(column = "mean_acc", na.rm = T)
View(ms)
ms <- ss_acc_all %>%
filter(is.na(test) == F) %>%
group_by(subid, exptarget_bin, condition) %>%
summarise(mean_acc = mean(test, na.rm = T)) %>%
group_by(exptarget_bin, condition) %>%
multi_boot_standard(column = "mean_acc", na.rm = T)
View(ms)
ms <- ss_acc_all %>%
group_by(subid, exptarget_bin, condition) %>%
summarise(mean_acc = mean(test, na.rm = T)) %>%
filter(is.na(test) == F) %>%
group_by(exptarget_bin, condition) %>%
multi_boot_standard(column = "mean_acc", na.rm = T)
ms <- ss_acc_all %>%
group_by(subid, exptarget_bin, condition) %>%
summarise(mean_acc = mean(test, na.rm = T)) %>%
filter(is.na(mean_acc) == F) %>%
group_by(exptarget_bin, condition) %>%
multi_boot_standard(column = "mean_acc", na.rm = T)
View(ms)
View(ms)
ss_acc_all$exptarget_bin <- cut(ss_acc_all$exposure, breaks = 4)
ms <- ss_acc_all %>%
group_by(subid, exptarget_bin, condition) %>%
summarise(mean_acc = mean(test, na.rm = T)) %>%
group_by(exptarget_bin, condition) %>%
multi_boot_standard(column = "mean_acc", na.rm = T) %>%
filter(is.na(exptarget_bin) == F)
View(ms)
ggplot(aes(x = exptarget_bin, y = mean, fill = condition), data = ms) +
geom_bar(stat = "identity", position = position_dodge()) +
geom_linerange(aes(ymin = ci_lower, ymax = ci_upper), position = position_dodge(width = 0.9))
m1.cont <- lmer(test ~ exposure * condition + (1|subid), data = ss_acc_all)
summary(m1.cont)
kable(summary(m1.cont)$coef)
m2.cat <- lmer(test ~ exptarget_bin * condition + (1|subid), data = ss_acc_all)
kable(summary(m2.cat)$coef)
summary(m2.cat)
ss_acc_all <- d %>%
filter(trial.type != "familiar", participant_looking_char %in% c("left", "right")) %>%
group_by(subid, condition, trial_num = as.numeric(trial_num), trial.type) %>%
summarise(mean_accuracy = mean(correct)) %>%
spread(trial.type, mean_accuracy)
# plot the relation between acc on exposure and acc on test
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point() +
geom_smooth(method = "lm")
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point() +
geom_smooth(method = "lm")
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point() +
geom_smooth(method = "lm", se = F)
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point() +
geom_smooth(method = "lm", se = F, size = 2)
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point() +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized()
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized()
?geom_dl
install.packages("ggplot2")
install.packages("ggplot2")
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized()
library(ggplot2)
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized()
library(dplyr)
library(readr)
library(magrittr)
library(ggplot2)
library(tidyr)
library(knitr)
library(langcog)
library(lme4)
theme_set(theme_bw())
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized()
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized() +
geom_dl()
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized() +
guides(color=F) +
geom_dl(aes(label=condition),method="top.qp")
install.packages("directlabels")
library(directlabels)
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized() +
guides(color=F) +
geom_dl(aes(label=condition),method="top.qp")
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized() +
guides(color=F) +
geom_dl(aes(label=condition),method="last")
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized() +
guides(color=F) +
geom_dl(aes(label=condition),method="last.points")
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_smooth(method = "lm", se = F, size = 2) +
geom_dl(aes(label=condition),method="last.points")
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_smooth(method = "lm", se = F, size = 2) +
geom_dl(aes(label=condition),method="last.qp")
geom_point(alpha = 0.6) +
scale_color_solarized() +
guides(color=F)
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_smooth(method = "lm", se = F, size = 2) +
geom_dl(aes(label=condition),method="last.points")
scale_color_solarized() +
guides(color=F)
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_smooth(method = "lm", se = F, size = 2) +
geom_dl(aes(label=condition), method="last.qp")
scale_color_solarized() +
guides(color=F)
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized() +
guides(color=F)
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized() +
geom_point(alpha = 0.6) +
guides(color=F)
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized() +
geom_rug()
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_smooth(method = "lm", se = F, size = 2) +
scale_color_solarized() +
geom_rug() +
ylim(0.5, 1)
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_smooth(method = "lm", se = T, size = 2) +
scale_color_solarized() +
geom_rug() +
ylim(0.5, 1)
ggplot(aes(x = exposure, y = test, color = condition), data = ss_acc_all) +
geom_smooth(method = "lm", se = T, size = 2) +
scale_color_solarized() +
geom_point(alpha = 0.6)
